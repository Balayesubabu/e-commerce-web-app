{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kampasati Bala yesu\\\\Downloads\\\\mern_full_project\\\\frontend\\\\src\\\\components\\\\CartPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CartPage({\n  user\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const nav = useNavigate();\n  const load = async () => {\n    if (user) {\n      const token = JSON.parse(localStorage.getItem('auth')).token;\n      API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      const res = await API.get('/cart');\n      setItems(res.data.items.map(it => ({\n        ...it,\n        name: it.product.name,\n        price: it.product.price,\n        image: it.product.image,\n        productId: it.product._id\n      })));\n    } else {\n      const g = JSON.parse(localStorage.getItem('guestCart') || '[]');\n      setItems(g);\n    }\n  };\n  useEffect(() => {\n    load(); /* eslint-disable-next-line */\n  }, [user]);\n  const update = async (productId, size, quantity) => {\n    if (user) {\n      const token = JSON.parse(localStorage.getItem('auth')).token;\n      API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      await API.post('/cart/add', {\n        productId,\n        size,\n        quantity\n      });\n      load();\n    } else {\n      const g = JSON.parse(localStorage.getItem('guestCart') || '[]');\n      const idx = g.findIndex(it => it.productId === productId && it.size === size);\n      if (idx > -1) {\n        g[idx].quantity = quantity;\n        localStorage.setItem('guestCart', JSON.stringify(g));\n        setItems(g);\n      }\n    }\n  };\n  const remove = async (productId, size) => {\n    if (user) {\n      const token = JSON.parse(localStorage.getItem('auth')).token;\n      API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      await API.post('/cart/remove', {\n        productId,\n        size\n      });\n      load();\n    } else {\n      let g = JSON.parse(localStorage.getItem('guestCart') || '[]');\n      g = g.filter(it => !(it.productId === productId && it.size === size));\n      localStorage.setItem('guestCart', JSON.stringify(g));\n      setItems(g);\n    }\n  };\n  const total = items.reduce((s, i) => s + i.price * i.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), items.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Empty. \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Shop now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 41\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [items.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 12,\n          alignItems: 'center',\n          borderBottom: '1px solid #eee',\n          padding: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: it.image,\n          alt: \"\",\n          style: {\n            width: 80\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: it.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Size: \", it.size]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u20B9\", it.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"1\",\n          value: it.quantity,\n          onChange: e => update(it.productId, it.size, Number(e.target.value)),\n          style: {\n            width: 60\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => remove(it.productId, it.size),\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this)]\n      }, it.productId + '-' + it.size, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Total: \\u20B9\", total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => nav('/checkout'),\n          children: \"Proceed to Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(CartPage, \"xYaJC+IQqOAsl5fI6rZf9omEA0s=\", false, function () {\n  return [useNavigate];\n});\n_c = CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useEffect","useState","API","Link","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","CartPage","user","_s","items","setItems","nav","load","token","JSON","parse","localStorage","getItem","defaults","headers","common","res","get","data","map","it","name","product","price","image","productId","_id","g","update","size","quantity","post","idx","findIndex","setItem","stringify","remove","filter","total","reduce","s","i","children","fileName","_jsxFileName","lineNumber","columnNumber","length","to","style","display","gap","alignItems","borderBottom","padding","src","alt","width","flex","type","min","value","onChange","e","Number","target","onClick","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/Kampasati Bala yesu/Downloads/mern_full_project/frontend/src/components/CartPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { Link, useNavigate } from 'react-router-dom';\n\nexport default function CartPage({ user }) {\n  const [items, setItems] = useState([]);\n  const nav = useNavigate();\n\n  const load = async () => {\n    if (user) {\n      const token = JSON.parse(localStorage.getItem('auth')).token;\n      API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      const res = await API.get('/cart');\n      setItems(res.data.items.map(it => ({ ...it, name: it.product.name, price: it.product.price, image: it.product.image, productId: it.product._id })));\n    } else {\n      const g = JSON.parse(localStorage.getItem('guestCart') || '[]');\n      setItems(g);\n    }\n  };\n\n  useEffect(()=>{ load(); /* eslint-disable-next-line */ }, [user]);\n\n  const update = async (productId, size, quantity) => {\n    if (user) {\n      const token = JSON.parse(localStorage.getItem('auth')).token;\n      API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      await API.post('/cart/add', { productId, size, quantity });\n      load();\n    } else {\n      const g = JSON.parse(localStorage.getItem('guestCart') || '[]');\n      const idx = g.findIndex(it => it.productId === productId && it.size === size);\n      if (idx > -1) {\n        g[idx].quantity = quantity;\n        localStorage.setItem('guestCart', JSON.stringify(g));\n        setItems(g);\n      }\n    }\n  };\n\n  const remove = async (productId, size) => {\n    if (user) {\n      const token = JSON.parse(localStorage.getItem('auth')).token;\n      API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      await API.post('/cart/remove', { productId, size });\n      load();\n    } else {\n      let g = JSON.parse(localStorage.getItem('guestCart') || '[]');\n      g = g.filter(it => !(it.productId === productId && it.size === size));\n      localStorage.setItem('guestCart', JSON.stringify(g));\n      setItems(g);\n    }\n  };\n\n  const total = items.reduce((s,i) => s + i.price * i.quantity, 0);\n\n  return (\n    <div>\n      <h3>Your Cart</h3>\n      {items.length === 0 ? <div>Empty. <Link to=\"/\">Shop now</Link></div> :\n        <>\n          {items.map(it => (\n            <div key={it.productId + '-' + it.size} style={{display:'flex', gap:12, alignItems:'center', borderBottom:'1px solid #eee', padding:8}}>\n              <img src={it.image} alt=\"\" style={{width:80}}/>\n              <div style={{flex:1}}>\n                <div>{it.name}</div>\n                <div>Size: {it.size}</div>\n              </div>\n              <div>₹{it.price}</div>\n              <input type=\"number\" min=\"1\" value={it.quantity} onChange={e=>update(it.productId, it.size, Number(e.target.value))} style={{width:60}} />\n              <button onClick={()=>remove(it.productId, it.size)}>Remove</button>\n            </div>\n          ))}\n          <div style={{marginTop:12}}><strong>Total: ₹{total}</strong></div>\n          <div style={{marginTop:12}}>\n            <button onClick={()=>nav('/checkout')}>Proceed to Checkout</button>\n          </div>\n        </>\n      }\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}